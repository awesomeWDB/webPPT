webpackJsonp([1],{JNAy:function(t,n){},NHnr:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("lRwf"),a=e.n(o),r=e("lC5x"),i=e.n(r),s=e("J0Oq"),u=e.n(s),c=e("4YfN"),l=e.n(c),f=e("SJI6"),m=e.n(f),p={name:"App",methods:l()({},Object(f.mapActions)(["Init"])),created:function(){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.Init();case 2:console.log(t.$store.state);case 3:case"end":return n.stop()}},n,t)}))()}},h={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]};var v=e("C7Lr")(p,h,!1,function(t){e("JNAy")},null,null).exports,g=e("l6IN"),d=e.n(g),_=e("pRNm"),T=e.n(_),E={methods:{handleOpen:function(t,n){console.log(t,n)},handleClose:function(t,n){console.log(t,n)}}},N={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1"},on:{open:t.handleOpen,close:t.handleClose}},[e("el-menu-item",{attrs:{index:"1"}},[e("i",{staticClass:"el-icon-location"}),t._v(" "),e("span",{attrs:{slot:"title"},slot:"title"},[t._v("目录")])]),t._v(" "),e("el-menu-item",{attrs:{index:"2"}},[e("i",{staticClass:"el-icon-menu"}),t._v(" "),e("span",{attrs:{slot:"title"},slot:"title"},[t._v("编辑")])]),t._v(" "),e("el-menu-item",{attrs:{index:"3"}},[e("i",{staticClass:"el-icon-document"}),t._v(" "),e("span",{attrs:{slot:"title"},slot:"title"},[t._v("绑定")])])],1)},staticRenderFns:[]};var O=e("C7Lr")(E,N,!1,function(t){e("YP5W")},null,null).exports,b=e("rVsN"),w=e.n(b),S=e("OMN4"),U=e.n(S),x=e("sqb0"),R=e.n(x),A=function(t,n,e){return e?R.a.set(t,n,{expires:e}):R.a.set(t,n)},C=function(t){return R.a.remove(t)},L=function(t){return M({url:"/user?access_token="+t})},k=function(){var t=G.state.configuration.githubUsername;return M({url:"/users/"+t})},I={state:{token:function(t){return R.a.get(t)}("TOKEN_KEY")},mutations:{SET_TOKEN:function(t,n){t.token=n,A("TOKEN_KEY",n,30)},REMOVE_TOKEN:function(t){t.token=null,C("TOKEN_KEY")}},actions:{Authentication:function(t,n){var e=t.commit;L(n).then(function(t){var o=t.data;G.state.configuration.githubUsername==o.login?(e("SET_TOKEN",n),a.a.prototype.$notify({title:"成功",message:"Token绑定成功",type:"success"})):a.a.prototype.$message({message:"Token用户不一致",type:"error"})}).catch(function(){})},Cancellation:function(t){(0,t.commit)("REMOVE_TOKEN"),a.a.prototype.$message({message:"Token取消绑定",type:"info"})}}},y={state:{avatarUrl:null,name:null,location:null,blog:null,followers:0,following:0},mutations:{SET_AVATAR_URL:function(t,n){t.avatarUrl=n},SET_NAME:function(t,n){t.name=n},SET_LOCATION:function(t,n){t.location=n},SET_BLOG:function(t,n){t.blog=n},SET_FOLLOWERS:function(t,n){t.followers=n},SET_FOLLOWING:function(t,n){t.following=n}},actions:{GetInfo:function(t){var n=t.commit;k().then(function(t){var e=t.data;n("SET_AVATAR_URL","/static/img/avatar.png"),n("SET_NAME",e.name),n("SET_LOCATION",e.location),n("SET_BLOG",e.blog),n("SET_FOLLOWERS",e.followers),n("SET_FOLLOWING",e.following)})}}},F={state:{githubUsername:"",reposName:"",htmlTitle:""},mutations:{SET_CONFIGURATION:function(t,n){t.githubUsername=n.githubUsername||"shuichi123",t.htmlTitle=n.htmlTitle||t.githubUsername+"的博客",t.reposName=n.reposName||"webPPT"}},actions:{LocalReload:function(t,n){(0,t.commit)("SET_CONFIGURATION",n)},Init:function(t){var n=t.commit;return new w.a(function(t,e){U.a.get("./static/configuration.json").then(function(e){var o=e.data;n("SET_CONFIGURATION",o),t(e.data)}).catch(function(t){e(t)})})}}},K={token:function(t){return t.token.token},githubUsername:function(t){return t.configuration.githubUsername},htmlTitle:function(t){return t.configuration.htmlTitle},reposName:function(t){return t.configuration.reposName},avatarUrl:function(t){return t.user.avatarUrl},name:function(t){return t.user.name},location:function(t){return t.user.location},blog:function(t){return t.user.blog},followersTotal:function(t){return t.user.followers},followingTotal:function(t){return t.user.following}};a.a.use(m.a);var G=new m.a.Store({modules:{token:I,user:y,configuration:F},getters:K}),$=U.a.create({baseURL:"https://api.github.com",timeout:15e3});$.interceptors.request.use(),$.interceptors.response.use(function(t){t.data;return t},function(t){var n=void 0;switch(t.response.status){case 401:n="Token错误";break;default:n=t.response.data.message}return a.a.prototype.$message({message:n,type:"error"}),w.a.reject("error")});var M=$,P=function(t){var n=G.state.configuration.githubUsername,e=G.state.configuration.reposName;return M({url:"/repos/"+n+"/"+e+"/contents/"+t})},J={data:function(){return{files:[],ppts:[]}},computed:l()({},Object(f.mapGetters)(["githubUsername","reposName"]),{base_url:function(){return"https://"+this.githubUsername+".github.io/"+this.reposName}}),watch:{githubUsername:function(t){var n=this;P("ppt").then(function(t){console.log(t),n.files=t.data,n.files.forEach(function(t){P(t.path).then(function(t){console.log(t),t.data.forEach(function(t){t.name.includes(".html")&&"template.html"!=t.name&&n.ppts.push(t)}),console.log(n.ppts)})})})}}},W={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",t._l(t.ppts,function(n){return e("div",{key:n.name,staticClass:"link"},[e("el-link",{attrs:{href:t.base_url+"/"+n.path,target:"_blank"}},[t._v(t._s(n.name.split(".html")[0]))])],1)}),0)},staticRenderFns:[]};var Y={components:{myNav:O,myMain:e("C7Lr")(J,W,!1,function(t){e("fBu7")},"data-v-7598b5b9",null).exports},methods:{}},j={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",[n("my-nav",{staticClass:"nav"}),this._v(" "),n("my-main",{staticClass:"main"})],1)},staticRenderFns:[]};var V=e("C7Lr")(Y,j,!1,function(t){e("P+1f")},null,null).exports;a.a.use(T.a);var B=new T.a({routes:[{path:"/",name:"home",redirect:"index",component:V},{path:"/index",name:"index",component:V},{path:"/test",name:"test",component:V}]});a.a.use(d.a),a.a.config.productionTip=!1,new a.a({el:"#app",router:B,store:G,components:{App:v},template:"<App/>"})},OMN4:function(t,n){t.exports=axios},"P+1f":function(t,n){},SJI6:function(t,n){t.exports=vuex},YP5W:function(t,n){},fBu7:function(t,n){},l6IN:function(t,n){t.exports=element-ui},lRwf:function(t,n){t.exports=vue},pRNm:function(t,n){t.exports=vue-router}},["NHnr"]);
//# sourceMappingURL=app.7a587c11dd32ed52373f.js.map